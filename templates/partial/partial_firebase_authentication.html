{%- set firebase_config = datastore.get("firebase_config", namespace) -%}
{%- if firebase_config %}
    <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script><script>{{ firebase_config.initialization_snippet }}</script>
    {% if not firebase_config.custom_css %}<link type="text/css" rel="stylesheet" href="/plugins/firebase_authentication/static/firebase-ui-auth-v0.5.css"/>{% endif %}
    <code style="display: none" hidden id="firebase_config" data-callback-signed-in="{{ firebase_config.signed_in_callback }}" data-callback-signed-out="{{ firebase_config.signed_out_callback }}">{'callbacks': {'signInSuccess': function (user, credential, redirectUrl) {return handleSignedInUser(user);}},'signInFlow': '{{ firebase_config.sing_in_flow }}','signInSuccessUrl': '{{ firebase_config.sing_in_success_url }}','signInOptions': [{% if firebase_config.use_google_auth_provider %}{provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,scopes: {{ firebase_config.google_scopes }}},{% endif %}{% if firebase_config.use_facebook_auth_provider %}{provider: firebase.auth.FacebookAuthProvider.PROVIDER_ID,scopes: {{ firebase_config.facebook_scopes }}},{% endif %}{% if firebase_config.use_twitter_auth_provider %}firebase.auth.TwitterAuthProvider.PROVIDER_ID,{% endif %}{% if firebase_config.use_github_auth_provider %}firebase.auth.GithubAuthProvider.PROVIDER_ID,{% endif %}{% if firebase_config.use_email_auth_provider %}firebase.auth.EmailAuthProvider.PROVIDER_ID,{% endif %}],'tosUrl': '{{ firebase_config.terms_of_service_url }}',}</code>
    <div id="firebase_auth_loading">Loading...</div><div id="firebase_auth_loaded" style="display: none;"></div><div id="firebaseui-auth-container"></div>
    <script src="/plugins/firebase_authentication/static/firebase-ui-auth-v0.5.js"></script><script src="/plugins/firebase_authentication/static/auth.js"></script>
{%- endif -%}